<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>JavaScript éƒçŠµç´³æ¶“å©ç¬…å®¸ï¹€å½¸å©Šæ°¬å§©é”çŠ²ç•¾æ¥‚æ¨ºç•¾ç€¹è—‰ä» æ¤¤æŒæ™¥é?éç…î†ie/ff)</title>
</head>
<body>
<script type="text/javascript">
var $ = function (id) {
    return "string" == typeof id ? document.getElementById(id) : id;
};

var Class = {
  create: function() {
    return function() {
      this.initialize.apply(this, arguments);
    }
  }
}

Object.extend = function(destination, source) {
    for (var property in source) {
        destination[property] = source[property];
    }
    return destination;
}

function addEventHandler(oTarget, sEventType, fnHandler) {
    if (oTarget.addEventListener) {
        oTarget.addEventListener(sEventType, fnHandler, false);
    } else if (oTarget.attachEvent) {
        oTarget.attachEvent("on" + sEventType, fnHandler);
    } else {
        oTarget["on" + sEventType] = fnHandler;
    }
};


var Scroller = Class.create();
Scroller.prototype = {
  initialize: function(idScroller, idScrollMid, options) {
    var oThis = this, oScroller = $(idScroller), oScrollMid = $(idScrollMid);
    
    this.SetOptions(options);
    this.Side = this.options.Side || ["up"];//é‚ç‘°æ‚?
    this.scroller = oScroller;            //ç€µç¡…è–?
    this.speed = this.options.Speed;    //é–«ç†·å®?
    this.timer = null;                    //éƒå •æ£?
    this.pauseHeight = 0;                //ç€¹æ°¶ç?
    this.pauseWidth = 0;                //ç€¹æ°¬î†?
    this.pause = 0;                        //ç€¹æ°¶ç?ç€?
    this.side = 0;                        //é™å‚›æš?
    
    //é¢ã„¤ç°¬æ¶“å©ç¬…å©Šæ°¬å§?
    this.heightScroller = parseInt(oScroller.style.height) || oScroller.offsetHeight;
    this.heightList = oScrollMid.offsetHeight;
    
    //é¢ã„¤ç°¬å®¸ï¹€å½¸å©Šæ°¬å§©
    this.widthScroller = parseInt(oScroller.style.width) || oScroller.offsetWidth;
    this.widthList = oScrollMid.offsetWidth;
    
    //jsé™æ ¦ç¬‰é’ç™±ssç’å‰§ç–†é¨åˆªeightéœå¯ƒidth
    
    oScroller.style.overflow = "hidden";
    oScrollMid.appendChild(oScrollMid.cloneNode(true));
    oScrollMid.appendChild(oScrollMid.cloneNode(true));
    
    addEventHandler(oScroller, "mouseover", function() { oThis.Stop(); });
    addEventHandler(oScroller, "mouseout", function() { oThis.Start(); });
    
    this.Start();
  },
  //ç’å‰§ç–†æ¦›æ¨¿î…»çç‚´â‚?
  SetOptions: function(options) {
    this.options = {//æ¦›æ¨¿î…»éŠ?
      Step:            1,//å§£å¿”î‚¼é™æ¨ºå¯²é¨åˆ¾xé–?
      Speed:        20,//é–«ç†·å®?ç“’å©‚ã‡ç“’å©ƒåƒ)
      Side:            ["up"],//å©Šæ°¬å§©é‚ç‘°æ‚œ:"up"é„îˆ™ç¬‚é”›?down"é„îˆ™ç¬…é”›?left"é„îˆšä¹é”›?right"é„îˆšå½?
      PauseHeight:    0,//é—…æ–¿î˜¿æ¥‚æ¨ºä» æ¶“â‚¬å¨?
      PauseWidth:    0,//é—…æ–¿î˜¿ç€¹è—‰ä» æ¶“â‚¬å¨†?
      //è¤°æ’²ç¬‚æ¶“å¬ªæ‹°å®¸ï¹€å½¸æ¶“â‚¬ç’§èœ‚å¨‡é¢ã„¦æ¤‚è¹‡å‘´ã€ç’å‰§ç–†PauseHeightéœå­­auseWidthé‰ãƒ¨î†•ç¼ƒî†¿æµ†éšæˆœç¶…ç¼ƒ?
      PauseStep:    1000//é‹æ»ˆã€‘éƒå •æ£¿(PauseHeighté´æœ auseWidthæ¾¶Ñ‚ç°¬0ç’‡ãƒ¥å¼¬éç‰ˆå¢ éˆå¤‹æ™?
    };
    Object.extend(this.options, options || {});
  }, 
  //æî„€æ‚?
  Turn: function() {
    //é–«æ°³ç¹ƒç’å‰§ç–†é‚ç‘°æ‚œéæ‰®ç²é¨å‹¬å¸“é’æ¥æ½µæî„€æ‚?
    this.Side.push(this.Side.shift().toLowerCase());
  },
  //æ¶“å©ç¬…å©Šæ°¬å§©
  ScrollUpDown: function() {
    this.pause = this.pauseHeight;
    this.scroller.scrollTop = this.GetScroll(this.scroller.scrollTop, this.heightScroller, this.heightList, this.options.PauseHeight);
    this.pauseHeight = this.pause;
    
    var oThis = this;
    this.timer = window.setTimeout(function(){ oThis.Start(); }, this.speed);
  },
  //å®¸ï¹€å½¸å©Šæ°¬å§©
  ScrollLeftRight: function() {
    this.pause = this.pauseWidth;
    //å¨‰ã„¦å‰?scrollLeftç“’å‘°ç¹?400æµ¼æ°³åšœé”ã„¥å½‰é?400 å¨‰ã„¦å‰°é—€å®å®³
    this.scroller.scrollLeft = this.GetScroll(this.scroller.scrollLeft, this.widthScroller, this.widthList, this.options.PauseWidth);
    this.pauseWidth = this.pause;
    
    var oThis = this;
    this.timer = window.setTimeout(function(){ oThis.Start(); }, this.speed);
  },
  //é‘¾å³°å½‡ç’å‰§ç–†å©Šæ°¬å§©éç‰ˆåµ
  GetScroll: function(iScroll, iScroller, iList, iPause) {
    var iStep = this.options.Step * this.side;
    
    if(this.side > 0){
        if(iScroll >= (iList * 2 - iScroller)){ iScroll -= iList; }
    } else {
        if(iScroll <= 0){ iScroll += iList; }
    }
    
    this.speed = this.options.Speed;
    if(iPause > 0){
        if(Math.abs(this.pause) >= iPause){
            this.speed = this.options.PauseStep; this.pause = iStep = 0; this.Turn();
        } else {
            this.pause += iStep;
        }
    }
    
    return (iScroll + iStep);
  },
  //å¯®â‚¬æ¿?
  Start: function() {    
    //é‚ç‘°æ‚œç’å‰§ç–†
    switch (this.Side[0].toLowerCase()) {
        case "right" :
            if(this.widthList < this.widthScroller) return;
            this.side = -1;
            this.ScrollLeftRight();
            break;
        case "left" :
            if(this.widthList < this.widthScroller) return;
            this.side = 1;
            this.ScrollLeftRight();
            break;
        case "down" :
            if(this.heightList < this.heightScroller) return;
            this.side = -1;
            this.ScrollUpDown();
            break;
        case "up" :
        default :
            if(this.heightList < this.heightScroller) return;
            this.side = 1;
            this.ScrollUpDown();
    }
  },
  //é‹æ»„î„?
  Stop: function() {
    clearTimeout(this.timer);
  }
};

window.onload = function(){
    new Scroller("idScroller", "idScrollMid",{ Side:["left"], PauseHeight:50, PauseWidth:400 });
}
</script>
<style>
.Scroller {line-height:50px; border:1px solid #000000; padding:0px 10px; height:50px; width:400px;}
.Scroller *{margin:0px; padding:0px;}
.ScrollMid {float:left;}
.ScrollMid ul{width:800px;float:left;}
.ScrollMid li{list-style:none; float:left; width:390px; padding-left:10px;}
</style>
<div id="idScroller" class="Scroller" style="width:400px; height:50px;">
  <div style="width:1600px">
    <div id="idScrollMid" class="ScrollMid">
      <ul>
        <li>
          <div>wegfaighaewg</div>
        </li>
        <li>
          <div>wegfaighaewg</div>
        </li>
        <li>
          <div>wegfaighaewg</div>
        </li>
        <li>
          <div>wegfaighaewg</div>
        </li>
      </ul>
    </div>
  </div>
</div>
<div id="test"></div>
</body>
</html>